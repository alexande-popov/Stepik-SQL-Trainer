# 3.5 База данных "Учебная аналитика по курсу"

## Оглавление

[Создание базы данных](#Создание-базы-данных)

[Задание Step 2](#Задание-Step-2)



## Создание базы данных

### Предметная область
Курс на платформе Stepik состоит из нескольких модулей, каждый модуль включает несколько уроков, для каждого урока хранится информация о его положении в модуле. Каждый урок состоит из последовательности шагов. Каждый шаг имеет свой тип (это может быть текст, задание на SQL и пр.) и также порядковый номер в уроке.

Пользователи регистрируются на курсе, указывают свое имя. Когда пользователь проходит курс на платформе Stepik, все его действия оставляют "цифровой след": какие задания и когда он выполнил, сколько попыток сделал, правильно ли решил задание. Также хранятся все его комментарии. Если пользователь проходит курс и получает сертификат, то сохраняется дата его выдачи. Вся эта информация является первичной для учебной аналитики.

Учебная аналитика – это измерение, сбор, анализ и представление данных об обучающихся и их действиях на online платформе с целью понимания и оптимизации учебного процесса и той среды, где этот процесс происходит.

Для данного урока была создана база данных с полным описанием структуры курса. Учебная аналитика же включена в базу не в полном объеме, а только для некоторой группы пользователей из-за большого объема данных. Так, например, информация о решениях 17000 пользователей по нашему курсу за полгода его существования содержит 534500 записей. 

Пользователей для базы данных урока мы отобрали так:
* отбросили всех, кто не выполнил ни одного задания (их оказалось 8800);
* сгруппировали оставшихся пользователей в зависимости от количества решенных заданий
* затем отобрали типичных представителей групп более или менее пропорционально численности каждой группы (имена пользователей, конечно, заменили);
* поскольку пользователи отправляли от 1 до 1000 решений за время прохождения курса, в базу включили только попытки  шагов, относящихся к урокам 1.2, 2.2 и 2.4.

Получилось 64 пользователя и более 2000 их попыток.

### Логическая схема базы данных 
![pic-logi](https://ucarecdn.com/df6e64a7-45f3-4914-8d4b-1f2f272a0e40/)

### Некоторые пояснения
Иногда ключ состоит из двух столбцов. Это сделано для того, чтобы в таблицу нельзя было включить одинаковые записи. Для создания таблицы с двумя ключами используется код:
```SQL
CREATE TABLE step_keyword (
    step_id INT,
    keyword_id INT,
    PRIMARY KEY (step_id, keyword_id),
    FOREIGN KEY (step_id)  REFERENCES step (step_id) ON DELETE CASCADE,
    FOREIGN KEY (keyword_id)  REFERENCES keyword (keyword_id) ON DELETE CASCADE
);
```
#### Работа с датами
Формате  **Unix-время**, в котором хранится количество секунд, прошедших с 1 января 1970 года.

Для перевода к привычному типу `DATE` используется формула:
```
1970-01-01 + time_unix / 86400
```
В SQL для перевода удобно использовать функцию  
```SQL
FROM_UNIXTIME(time_unix)
```
[:arrow_up:Оглавление](#Оглавление)






[:arrow_up:Оглавление](#Оглавление)[:arrow_up:Оглавление](#Оглавление)[:arrow_up:Оглавление](#Оглавление)[:arrow_up:Оглавление](#Оглавление)[:arrow_up:Оглавление](#Оглавление)[:arrow_up:Оглавление](#Оглавление)[:arrow_up:Оглавление](#Оглавление)[:arrow_up:Оглавление](#Оглавление)[:arrow_up:Оглавление](#Оглавление)

